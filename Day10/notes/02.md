## ðŸ“˜ MongoDB Query Notes (Basic to Advanced)

---

### ðŸ“Œ 1. **Basic Shell Commands**

| Command            | Description           |
| ------------------ | --------------------- |
| `show dbs`         | List all databases    |
| `use testdb`       | Switch to `testdb`    |
| `show collections` | List all collections  |
| `db`               | Show current database |
| `exit`             | Exit shell            |

---

### ðŸ“Œ 2. **Insert Queries**

#### âž¤ Insert one document:

```js
db.employees.insertOne({
  id: 101,
  name: "Alice",
  department: "HR",
  salary: 50000
})
```

#### âž¤ Insert many documents:

```js
db.employees.insertMany([
  { id: 102, name: "Bob", department: "Sales", salary: 60000 },
  { id: 103, name: "Charlie", department: "IT", salary: 70000 }
])
```

---

### ðŸ“Œ 3. **Find (Select) Queries**

#### âž¤ Find all documents:

```js
db.employees.find()
```

#### âž¤ Pretty print:

```js
db.employees.find().pretty()
```

#### âž¤ Find with condition:

```js
db.employees.find({ department: "IT" })
```

#### âž¤ Find with greater than:

```js
db.employees.find({ salary: { $gt: 60000 } })
```

#### âž¤ Find with AND condition:

```js
db.employees.find({ department: "Sales", salary: { $gt: 50000 } })
```

#### âž¤ Find with OR:

```js
db.employees.find({ $or: [ { department: "IT" }, { salary: { $lt: 60000 } } ] })
```

#### âž¤ Find specific fields (projection):

```js
db.employees.find({}, { name: 1, salary: 1, _id: 0 })
```

---

### ðŸ“Œ 4. **Update Queries**

#### âž¤ Update one document:

```js
db.employees.updateOne(
  { id: 102 },
  { $set: { salary: 65000 } }
)
```

#### âž¤ Update many:

```js
db.employees.updateMany(
  { department: "IT" },
  { $inc: { salary: 2000 } }
)
```

---

### ðŸ“Œ 5. **Delete Queries**

#### âž¤ Delete one:

```js
db.employees.deleteOne({ id: 101 })
```

#### âž¤ Delete many:

```js
db.employees.deleteMany({ department: "Sales" })
```

---

### ðŸ“Œ 6. **Sorting and Limiting**

#### âž¤ Sort by salary ascending:

```js
db.employees.find().sort({ salary: 1 })
```

#### âž¤ Sort by name descending:

```js
db.employees.find().sort({ name: -1 })
```

#### âž¤ Limit number of results:

```js
db.employees.find().limit(2)
```

---

### ðŸ“Œ 7. **Aggregation Queries**

#### âž¤ Count by department:

```js
db.employees.aggregate([
  { $group: { _id: "$department", count: { $sum: 1 } } }
])
```

#### âž¤ Average salary by department:

```js
db.employees.aggregate([
  { $group: { _id: "$department", avgSalary: { $avg: "$salary" } } }
])
```

#### âž¤ Filter + group + sort:

```js
db.employees.aggregate([
  { $match: { salary: { $gt: 50000 } } },
  { $group: { _id: "$department", total: { $sum: "$salary" } } },
  { $sort: { total: -1 } }
])
```

---

### ðŸ“Œ 8. **Array Queries**

```js
db.projects.insertOne({
  name: "Alpha",
  team: ["Alice", "Bob", "Charlie"]
})
```

#### âž¤ Find documents with a team member:

```js
db.projects.find({ team: "Alice" })
```

#### âž¤ Find by array size:

```js
db.projects.find({ team: { $size: 3 } })
```

---

### ðŸ“Œ 9. **Indexing (for performance)**

```js
db.employees.createIndex({ name: 1 })
```

---

### ðŸ“Œ 10. **Drop / Delete Collection or Database**

#### âž¤ Drop a collection:

```js
db.employees.drop()
```

#### âž¤ Drop current database:

```js
db.dropDatabase()
```

---

## ðŸŽ¯ Bonus Tips

* MongoDB is **schema-less**, so each document can vary in structure.
* Use `_id` to uniquely identify documents.
* Prefer `insertMany`, `updateMany`, `deleteMany` for batch ops.
